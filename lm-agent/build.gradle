
subprojects {
    version = rootProject.version

    apply plugin: "java"

    ext {
        versions = [
                opentelemetry              : "1.6.0",
                opentelemetryAlpha         : "1.6.0-alpha",
                opentelemetryJavaagent     : "1.6.0",
                opentelemetryJavaagentAlpha: "1.6.0-alpha",
                bytebuddy             : "1.10.18",
                guava                 : "30.1-jre"
        ]

        deps = [
                bytebuddy           : "net.bytebuddy:byte-buddy:${versions.bytebuddy}",
                bytebuddyagent      : "net.bytebuddy:byte-buddy-agent:${versions.bytebuddy}",
                autoservice         : [
                        "com.google.auto.service:auto-service:1.0-rc7",
                        "com.google.auto:auto-common:0.8",
                        "com.google.guava:guava:${versions.guava}",
                ],
                autoValueAnnotations: "com.google.auto.value:auto-value-annotations:${versions.autoValue}",
        ]
    }

    repositories {
        mavenLocal()
        mavenCentral()
        maven {
            name = "sonatype"
            url = uri("https://oss.sonatype.org/content/repositories/snapshots")
        }
    }

    dependencies {
        testImplementation("org.mockito:mockito-core:3.3.3")
        testImplementation("org.junit.jupiter:junit-jupiter-api:5.6.2")
        testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:5.6.2")
    }

    tasks {
        test {
            useJUnitPlatform()
        }

        compileJava {
            options.release.set(8)
        }
    }
}